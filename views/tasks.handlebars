<div class="max-w-7xl mx-auto p-8">
  <!-- Header Section -->
  <!-- TODO: add header and fix spacing for nav links, could also be removed -->
  <div class="flex justify-between items-center mb-8">
    <nav class="flex space-x-8 text-lg">
    </nav>
  </div>

  <!-- Tasks Section -->
  <div class="mb-12">
    <h3 class="text-2xl font-semibold mb-6 text-center">Your Tasks</h3>
    <ul id="task-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {{#each tasks}}
      <li class="p-4 bg-gray-100 rounded shadow flex justify-between items-center">
        <div>
          <h4 class="font-bold">{{this.title}}</h4>
          <p class="text-sm">{{this.description}}</p>
          <p class="text-xs text-gray-500">{{this.due_date}}</p> <!-- TODO: Match due_date with backend field -->
        </div>
        <button class="text-red-500 hover:text-red-700" data-id="{{this.id}}">Remove</button>
      </li>
      {{/each}}
    </ul>
    <form id="add-task-form" method="POST" action="/api/tasks" class="mt-8 space-y-4">
      <input type="text" id="task-title" name="title" placeholder="Enter task title" required
        class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
      <textarea id="task-description" name="description" placeholder="Enter task description" required
        class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 transition"></textarea>
      <input type="datetime-local" id="task-due-date" name="due_date" required
        class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
      <!-- Match due_date with backend field -->
      <button type="submit"
        class="w-full bg-blue-500 text-white py-3 rounded hover:bg-blue-700 transition-transform transform hover:scale-105">Add
        Task</button>
    </form>
  </div>

  <!-- Tags Section -->
  <div class="mb-12">
    <h3 class="text-2xl font-semibold mb-6 text-center">Tags</h3>
    <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      {{#each tags}}
      <li class="bg-gray-200 rounded px-4 py-2 shadow-md">{{this.name}}</li>
      {{/each}}
    </ul>
    <form id="add-tag-form" method="POST" action="/api/tags" class="mt-8 space-y-4">
      <input type="text" id="tag-name" name="name" placeholder="Enter tag name" required
        class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
      <button type="submit"
        class="w-full bg-blue-500 text-white py-3 rounded hover:bg-blue-700 transition-transform transform hover:scale-105">Add
        Tag</button>
    </form>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const taskList = document.getElementById('task-list');

    taskList.addEventListener('click', function (event) {
      if (event.target.tagName === 'BUTTON') {
        const taskId = event.target.getAttribute('data-id');

        // Make a DELETE request to remove the task
        fetch(`/api/tasks/${taskId}`, {
          method: 'DELETE'
        })
          .then(response => {
            if (response.ok) {
              // Remove the task from the DOM
              event.target.parentElement.remove();
            } else {
              alert('Failed to delete the task.');
            }
          });
      }
    });
  });
</script>